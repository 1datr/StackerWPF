<Window xmlns:my1="clr-namespace:WpfStackerLibrary;assembly=WpfStackerLibrary"  x:Class="WpfStacker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="АРМ Кинеф" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" DataContext="{Binding}" xmlns:my="clr-namespace:WpfStacker" Loaded="Window_Loaded" Width="1131" Height="824" Icon="/WpfStacker;component/Images/favicon_kinef.ico">
    <Window.Resources>
        <CollectionViewSource x:Key="VCellContentCount"  />
        <Style x:Key="btnOccupied">
            <Setter Property="Control.FontWeight" Value="Bold"></Setter>         
        </Style>
    </Window.Resources>
    
    <TabControl VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="2,5,2,2">
        <TabItem Header="Штабелер 1">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="228*"></ColumnDefinition>
                    <ColumnDefinition Width="650*"></ColumnDefinition>
                    <ColumnDefinition Width="372*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition></RowDefinition>
                    <RowDefinition Height="100"></RowDefinition>
                    <RowDefinition Height="20"></RowDefinition>
                </Grid.RowDefinitions>

                <TabControl Grid.Row="1" Grid.Column="1" Margin="2,5,2,2">
                    <TabItem Header="Ошибки">

                    </TabItem>
                    <TabItem Header="Консоль">
                        <my1:Console StringSrc1="{Binding ElementName=stacker1_man, Path=ConnStatus}"></my1:Console>
                    </TabItem>
                    <TabItem Header="Переменные">
                        <DataGrid HorizontalAlignment="Stretch" DataContext="{Binding Path=VarList, ElementName=stacker1_man}"  Margin="2,2,5,2" ItemsSource="{Binding Path=/}" AutoGenerateColumns="True" IsReadOnly="True">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Переменная" Binding="{Binding Path=name}" ></DataGridTextColumn>
                                <DataGridTextColumn Header="Значение" Binding="{Binding Path=Value}" ></DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>
                </TabControl>


                <TabControl VerticalAlignment="Stretch" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Stretch" >

                    <TabItem Header="{Binding Path=SelCellStr, ElementName=stacker1}">
                        <DataGrid ItemsSource="{Binding ElementName=stacker1, Path=SelectedCellContent}" HorizontalAlignment="Stretch" Margin="2,2,2,2" AutoGenerateColumns="False">
                            <DataGrid.Columns>

                                <DataGridTextColumn Header="Деталь" Binding="{Binding Product.Name}" >

                                </DataGridTextColumn>
                                <DataGridTextColumn Header="Количество" Binding="{Binding Count}" ></DataGridTextColumn>
                                <DataGridTextColumn Header="Изменено" Binding="{Binding ChangeDate}" ></DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>

                    <TabItem Header="Тележка">
                        <DataGrid ItemsSource="{Binding ElementName=stacker1, Path=Telezhka}" AutoGenerateColumns="False" HorizontalAlignment="Stretch" Margin="2,2,2,2">
                            <DataGrid.Columns>

                                <DataGridTextColumn Header="Деталь" Binding="{Binding Product.Name}" >

                                </DataGridTextColumn>
                                <DataGridTextColumn Header="Количество" Binding="{Binding Count}" ></DataGridTextColumn>
                                <DataGridTextColumn Header="Изменено" Binding="{Binding ChangeDate}" ></DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>

                </TabControl>


                <my1:StackerControl HorizontalAlignment="Stretch" Grid.Column="1" Name="stacker1" Rows="22" Floors="12" CellOccupied="{StaticResource btnOccupied}" Margin="2,2,4,4">
                    <my1:StackerControl.PointsEmptyLeft>
                        <my1:GridPoint X="0" Y="0" />
                        <my1:GridPoint Y="1" />
                        <my1:GridPoint Y="2" />
                        <my1:GridPoint Y="3" />
                        <my1:GridPoint Y="4" />
                        <my1:GridPoint Y="5" />
                        <my1:GridPoint Y="6" />
                        <my1:GridPoint Y="7" />
                        <my1:GridPoint Y="8" />
                        <my1:GridPoint Y="9" />
                        <my1:GridPoint Y="10" />
                    </my1:StackerControl.PointsEmptyLeft>
                    <my1:StackerControl.PointsEmptyRight>

                        <my1:GridPoint Y="1" />
                        <my1:GridPoint />
                        <my1:GridPoint Y="2" />
                        <my1:GridPoint Y="3" />
                        <my1:GridPoint Y="4" />
                        <my1:GridPoint Y="5" />
                        <my1:GridPoint Y="6" />
                        <my1:GridPoint Y="7" />
                        <my1:GridPoint Y="8" />
                        <my1:GridPoint Y="9" />
                        <my1:GridPoint Y="10" />
                        <my1:GridPoint Y="11" />
                    </my1:StackerControl.PointsEmptyRight>
                </my1:StackerControl>

                <GridSplitter Grid.Column="1" Grid.Row="1" Height="5" ResizeDirection="Rows" HorizontalAlignment="Stretch" VerticalAlignment="Top"></GridSplitter>
                <GridSplitter Grid.Column="1" Grid.Row="0" Width="5"></GridSplitter>
                <my1:StackerManBNR Name="stacker1_man" Height="150" VerticalAlignment="Top" StackerID="1"  Grid.Column="0" Grid.Row="0" />

                <StatusBar  Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3">
                    <TextBlock Text="{Binding ElementName=stacker1_man, Path=ConnStatus, Mode=OneWay}"></TextBlock>

                </StatusBar>

            </Grid>



        </TabItem>
        <TabItem Header="Детали"></TabItem>
    </TabControl>
    
    
</Window>
